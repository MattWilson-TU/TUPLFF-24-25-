
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fantasy Football Stats</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <style>
            body {
                font-family: 'Segoe UI', Roboto, Arial, sans-serif;
                margin: 0;
                padding: 20px;
                color: #333;
                line-height: 1.6;
                background-color: #f5f8fa;
                opacity: 0;
                animation: fadeInPage 0.8s ease-in forwards;
            }
            
            @keyframes fadeInPage {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            h1, h2, h3 {
                color: #2c3e50;
                font-weight: 600;
                letter-spacing: -0.5px;
            }
            
            h1 {
                font-size: 2.2em;
                text-align: center;
                margin-bottom: 25px;
                position: relative;
                padding-bottom: 15px;
            }
            
            h1:after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 4px;
                background: linear-gradient(to right, #3498db, #2c3e50);
                border-radius: 2px;
            }
            
            .chart-container {
                background-color: white;
                border-radius: 10px;
                padding: 20px;
                margin-bottom: 25px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.08);
                opacity: 0;
                animation: fadeIn 0.5s ease-out 0.3s forwards;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            .back-link {
                display: inline-block;
                margin-bottom: 20px;
                color: #3498db;
                text-decoration: none;
                transition: color 0.3s;
            }
            
            .back-link:hover {
                color: #2980b9;
                text-decoration: underline;
            }
            
            table {
                border-collapse: separate;
                border-spacing: 0;
                width: 100%;
                margin-bottom: 25px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.08);
                background-color: white;
                font-size: 14px;
                border-radius: 8px;
                overflow: hidden;
            }
            
            th, td {
                padding: 12px 15px;
                text-align: left;
                border-bottom: 1px solid #eee;
            }
            
            th {
                background: linear-gradient(to right, #3498db, #2980b9);
                color: white;
                font-weight: 600;
                position: sticky;
                top: 0;
                z-index: 10;
                text-transform: uppercase;
                font-size: 12px;
                letter-spacing: 0.5px;
            }
            
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            
            tr:hover {
                background-color: #f0f7ff;
                transition: background-color 0.2s ease;
            }
            
            .position-GKP { color: #fdcb6e; }
            .position-DEF { color: #00cec9; }
            .position-MID { color: #6c5ce7; }
            .position-FWD { color: #e17055; }
            
            .players-section {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .player-card {
                background-color: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            }
            
            .player-card h3 {
                padding: 15px;
                margin: 0;
                color: white;
            }
            
            .gkp-header { background: linear-gradient(to right, #fdcb6e, #f39c12); }
            .def-header { background: linear-gradient(to right, #00cec9, #00b894); }
            .mid-header { background: linear-gradient(to right, #6c5ce7, #5e52bf); }
            .fwd-header { background: linear-gradient(to right, #e17055, #d35400); }
            
            .player-table {
                margin: 0;
                box-shadow: none;
            }
            
            @media (max-width: 768px) {
                .players-section {
                    grid-template-columns: 1fr;
                }
                
                .chart-container {
                    padding: 15px;
                }
                
                h1 {
                    font-size: 1.8em;
                }
            }
            
            .legend-container {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                margin-bottom: 20px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin: 5px 10px;
                cursor: pointer;
                padding: 5px 10px;
                border-radius: 15px;
                transition: all 0.2s ease;
            }
            
            .legend-item:hover {
                background-color: #f0f0f0;
            }
            
            .legend-item.highlighted {
                background-color: #e8f5e9;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            
            .legend-color {
                width: 15px;
                height: 15px;
                margin-right: 5px;
                border-radius: 3px;
            }
            
            .chart-title {
                text-align: center;
                margin-bottom: 15px;
                font-size: 1.5em;
                color: #2c3e50;
            }
            
            .switch-view {
                display: flex;
                justify-content: center;
                margin-bottom: 15px;
            }
            
            .switch-btn {
                background-color: #f0f0f0;
                border: none;
                padding: 8px 15px;
                margin: 0 5px;
                border-radius: 20px;
                cursor: pointer;
                transition: all 0.3s;
                font-weight: 600;
            }
            
            .switch-btn.active {
                background-color: #3498db;
                color: white;
            }
            
            .section-title {
                text-align: center;
                margin: 30px 0 15px;
                position: relative;
            }
            
            .section-title::after {
                content: '';
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                width: 50px;
                height: 3px;
                background: linear-gradient(to right, #3498db, #2c3e50);
                border-radius: 2px;
            }
            
            /* Chart containers with fixed height */
            #points-chart-container, #position-chart-container {
                height: 500px;
                width: 100%;
                position: relative;
            }
            
            .chart-controls {
                display: flex;
                justify-content: center;
                align-items: center;
                margin-bottom: 15px;
                flex-wrap: wrap;
            }
            
            .manager-selector {
                margin: 0 10px 10px 10px;
            }
            
            .manager-dropdown {
                padding: 8px 15px;
                border-radius: 20px;
                border: 1px solid #ddd;
                font-family: inherit;
                font-size: 14px;
                min-width: 200px;
                background-color: white;
                cursor: pointer;
            }
            
            .manager-dropdown:focus {
                outline: none;
                border-color: #3498db;
                box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.25);
            }
            
            .reset-button {
                background-color: #e74c3c;
                color: white;
                border: none;
                padding: 8px 15px;
                border-radius: 20px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                margin-left: 10px;
            }
            
            .reset-button:hover {
                background-color: #c0392b;
            }
            
            .reset-button:disabled {
                background-color: #ccc;
                cursor: not-allowed;
            }
        
            /* Critical tab functionality CSS */
            .tab-content { display: none; }
            .tab-content.active { display: block; }
            .tabs-container { display: flex; }
            .tabs { display: flex; }
            .tab { display: inline-block; }
            </style>
    </head>
    <body>
        <a href="fantasy_football.html" class="back-link">← Back to League Table</a>
        <h1>Fantasy Football Stats</h1>
        
        <!-- Points per Gameweek Chart -->
        <div class="chart-container">
            <div class="chart-title">Points per Gameweek</div>
            <div class="switch-view">
                <button class="switch-btn active" id="points-view">Points View</button>
                <button class="switch-btn" id="position-view">Position View</button>
            </div>
            
            <!-- Manager Selection Dropdown -->
            <div class="chart-controls">
                <div class="manager-selector">
                    <select id="manager-dropdown" class="manager-dropdown">
                        <option value="">Select a manager to highlight...</option>
                        <option value="AVO">AVO</option><option value="Dil">Dil</option><option value="Fridge">Fridge</option><option value="Shotgun">Shotgun</option><option value="Scum">Scum</option><option value="Ed">Ed</option><option value="Monkey">Monkey</option><option value="Louise">Louise</option><option value="Rich">Rich</option><option value="Michelle">Michelle</option><option value="Dave">Dave</option><option value="Moses">Moses</option><option value="John">John</option><option value="Shergs">Shergs</option><option value="Young H">Young H</option><option value="Pony">Pony</option>
                    </select>
                </div>
                <button id="reset-highlight" class="reset-button" disabled>Reset</button>
            </div>
            
            <div id="points-chart-container">
                <canvas id="pointsChart"></canvas>
            </div>
            <div id="position-chart-container" style="display: none;">
                <canvas id="positionChart"></canvas>
            </div>
            <div class="legend-container" id="chart-legend"></div>
        </div>
        
        <!-- Top Players for Current Gameweek Section -->
        <h2 class="section-title">Top 10 Players by Position - Gameweek 37</h2>
        <div class="players-section">
    
        <div class="player-card">
            <h3 class="gkp-header">Goalkeepers</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>GW37 Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-GKP">Raya</td>
                    <td>ARS</td>
                    <td>7</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Martinez</td>
                    <td>AVL</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Sánchez</td>
                    <td>CHE</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Pickford</td>
                    <td>EVE</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Leno</td>
                    <td>FUL</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Stolarczyk</td>
                    <td>LEI</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Pope</td>
                    <td>NEW</td>
                    <td>3</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Sels</td>
                    <td>NFO</td>
                    <td>3</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Flekken</td>
                    <td>BRE</td>
                    <td>2</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Onana</td>
                    <td>MUN</td>
                    <td>2</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="def-header">Defenders</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>GW37 Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-DEF">Konsa</td>
                    <td>AVL</td>
                    <td>15</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Cucurella</td>
                    <td>CHE</td>
                    <td>15</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Justin</td>
                    <td>LEI</td>
                    <td>12</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">James</td>
                    <td>CHE</td>
                    <td>10</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Tosin</td>
                    <td>CHE</td>
                    <td>8</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Mykolenko</td>
                    <td>EVE</td>
                    <td>8</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Milenković</td>
                    <td>NFO</td>
                    <td>8</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Kiwior</td>
                    <td>ARS</td>
                    <td>7</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Pau</td>
                    <td>AVL</td>
                    <td>7</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Young</td>
                    <td>EVE</td>
                    <td>7</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="mid-header">Midfielders</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>GW37 Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-MID">Rice</td>
                    <td>ARS</td>
                    <td>11</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Gibbs-White</td>
                    <td>NFO</td>
                    <td>11</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Kamara</td>
                    <td>AVL</td>
                    <td>10</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Adama</td>
                    <td>FUL</td>
                    <td>9</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Bowen</td>
                    <td>WHU</td>
                    <td>8</td>
                </tr>
            
                <tr>
                    <td class="position-MID">McAteer</td>
                    <td>LEI</td>
                    <td>7</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Ødegaard</td>
                    <td>ARS</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Rogers</td>
                    <td>AVL</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-MID">McNeil</td>
                    <td>EVE</td>
                    <td>6</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Cairney</td>
                    <td>FUL</td>
                    <td>6</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="fwd-header">Forwards</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>GW37 Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-FWD">Ndiaye</td>
                    <td>EVE</td>
                    <td>13</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Wissa</td>
                    <td>BRE</td>
                    <td>10</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Raúl</td>
                    <td>FUL</td>
                    <td>9</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Vardy</td>
                    <td>LEI</td>
                    <td>8</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Watkins</td>
                    <td>AVL</td>
                    <td>5</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Beto</td>
                    <td>EVE</td>
                    <td>2</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Hirst</td>
                    <td>IPS</td>
                    <td>2</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Højlund</td>
                    <td>MUN</td>
                    <td>2</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Wilson</td>
                    <td>NEW</td>
                    <td>2</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Wood</td>
                    <td>NFO</td>
                    <td>2</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        </div>
        
        <!-- Top Players for Full Season Section -->
        <h2 class="section-title">Top 10 Players by Position - Full Season</h2>
        <div class="players-section">
    
        <div class="player-card">
            <h3 class="gkp-header">Goalkeepers</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Total Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-GKP">Sels</td>
                    <td>NFO</td>
                    <td>148</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Pickford</td>
                    <td>EVE</td>
                    <td>147</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Raya</td>
                    <td>ARS</td>
                    <td>140</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Flekken</td>
                    <td>BRE</td>
                    <td>135</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Henderson</td>
                    <td>CRY</td>
                    <td>132</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Sánchez</td>
                    <td>CHE</td>
                    <td>120</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Onana</td>
                    <td>MUN</td>
                    <td>120</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Martinez</td>
                    <td>AVL</td>
                    <td>113</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">Leno</td>
                    <td>FUL</td>
                    <td>113</td>
                </tr>
            
                <tr>
                    <td class="position-GKP">A.Becker</td>
                    <td>LIV</td>
                    <td>105</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="def-header">Defenders</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Total Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-DEF">Alexander-Arnold</td>
                    <td>LIV</td>
                    <td>147</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Gvardiol</td>
                    <td>MCI</td>
                    <td>143</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Milenković</td>
                    <td>NFO</td>
                    <td>143</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Virgil</td>
                    <td>LIV</td>
                    <td>142</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Muñoz</td>
                    <td>CRY</td>
                    <td>139</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Saliba</td>
                    <td>ARS</td>
                    <td>130</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Murillo</td>
                    <td>NFO</td>
                    <td>128</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Kerkez</td>
                    <td>BOU</td>
                    <td>127</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Aina</td>
                    <td>NFO</td>
                    <td>127</td>
                </tr>
            
                <tr>
                    <td class="position-DEF">Collins</td>
                    <td>BRE</td>
                    <td>125</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="mid-header">Midfielders</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Total Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-MID">M.Salah</td>
                    <td>LIV</td>
                    <td>332</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Mbeumo</td>
                    <td>BRE</td>
                    <td>228</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Palmer</td>
                    <td>CHE</td>
                    <td>211</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Luis Díaz</td>
                    <td>LIV</td>
                    <td>180</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Bowen</td>
                    <td>WHU</td>
                    <td>180</td>
                </tr>
            
                <tr>
                    <td class="position-MID">B.Fernandes</td>
                    <td>MUN</td>
                    <td>167</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Rogers</td>
                    <td>AVL</td>
                    <td>160</td>
                </tr>
            
                <tr>
                    <td class="position-MID">J.Murphy</td>
                    <td>NEW</td>
                    <td>157</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Iwobi</td>
                    <td>FUL</td>
                    <td>155</td>
                </tr>
            
                <tr>
                    <td class="position-MID">Kluivert</td>
                    <td>BOU</td>
                    <td>154</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        <div class="player-card">
            <h3 class="fwd-header">Forwards</h3>
            <table class="player-table">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Total Pts</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr>
                    <td class="position-FWD">Isak</td>
                    <td>NEW</td>
                    <td>209</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Wood</td>
                    <td>NFO</td>
                    <td>198</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Watkins</td>
                    <td>AVL</td>
                    <td>184</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Wissa</td>
                    <td>BRE</td>
                    <td>184</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Cunha</td>
                    <td>WOL</td>
                    <td>175</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Haaland</td>
                    <td>MCI</td>
                    <td>173</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Mateta</td>
                    <td>CRY</td>
                    <td>147</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Raúl</td>
                    <td>FUL</td>
                    <td>145</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Delap</td>
                    <td>IPS</td>
                    <td>132</td>
                </tr>
            
                <tr>
                    <td class="position-FWD">Strand Larsen</td>
                    <td>WOL</td>
                    <td>130</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        
        </div>
        
        <script>
            // Get context for charts
            const pointsCtx = document.getElementById('pointsChart').getContext('2d');
            const positionCtx = document.getElementById('positionChart').getContext('2d');
            
            // Generate random colors for each manager
            function getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            
            // Create a color map for managers
            const managerColors = {};
    
            // Manager list
            const managers = ["AVO", "Dil", "Fridge", "Shotgun", "Scum", "Ed", "Monkey", "Louise", "Rich", "Michelle", "Dave", "Moses", "John", "Shergs", "Young H", "Pony"];
            
            // Assign colors to managers
            managers.forEach(manager => {
                managerColors[manager] = getRandomColor();
            });
            
            // Points by gameweek data
            const pointsByGameweek = {"Dave": {"1": 27, "2": 30, "3": 39, "4": 43, "5": 39, "6": 22, "7": 24, "8": 13, "9": 29, "10": 20, "11": 37, "12": 29, "13": 32, "14": 28, "15": 23, "16": 44, "17": 13, "18": 29, "19": 31, "20": 30, "21": 21, "22": 31, "23": 55, "24": 27, "25": 16, "26": 26, "27": 27, "28": 27, "29": 26, "30": 31, "31": 27, "32": 26, "33": 26, "34": 27, "35": 30, "36": 32, "37": 13}, "Shergs": {"1": 45, "2": 60, "3": 31, "4": 42, "5": 32, "6": 38, "7": 37, "8": 22, "9": 16, "10": 20, "11": 17, "12": 39, "13": 37, "14": 26, "15": 24, "16": 27, "17": 44, "18": 27, "19": 28, "20": 26, "21": 15, "22": 24, "23": 32, "24": 42, "25": 19, "26": 18, "27": 15, "28": 21, "29": 8, "30": 15, "31": 30, "32": 23, "33": 15, "34": 14, "35": 14, "36": 12, "37": 18}, "Rich": {"1": 39, "2": 39, "3": 20, "4": 27, "5": 25, "6": 21, "7": 28, "8": 20, "9": 26, "10": 20, "11": 22, "12": 23, "13": 14, "14": 46, "15": 13, "16": 42, "17": 30, "18": 33, "19": 39, "20": 35, "21": 44, "22": 37, "23": 42, "24": 16, "25": 50, "26": 25, "27": 32, "28": 32, "29": 35, "30": 42, "31": 21, "32": 25, "33": 29, "34": 21, "35": 29, "36": 45, "37": 12}, "Moses": {"1": 27, "2": 26, "3": 25, "4": 36, "5": 33, "6": 33, "7": 19, "8": 24, "9": 13, "10": 12, "11": 26, "12": 38, "13": 14, "14": 21, "15": 11, "16": 12, "17": 46, "18": 39, "19": 37, "20": 24, "21": 29, "22": 25, "23": 37, "24": 25, "25": 43, "26": 42, "27": 37, "28": 29, "29": 8, "30": 25, "31": 17, "32": 21, "33": 33, "34": 22, "35": 24, "36": 48, "37": 18}, "Dil": {"1": 44, "2": 32, "3": 48, "4": 14, "5": 44, "6": 24, "7": 32, "8": 13, "9": 28, "10": 24, "11": 39, "12": 41, "13": 38, "14": 31, "15": 39, "16": 26, "17": 33, "18": 36, "19": 48, "20": 51, "21": 36, "22": 33, "23": 39, "24": 39, "25": 47, "26": 58, "27": 37, "28": 36, "29": 19, "30": 27, "31": 53, "32": 62, "33": 43, "34": 55, "35": 25, "36": 47, "37": 25}, "Michelle": {"1": 27, "2": 16, "3": 20, "4": 46, "5": 25, "6": 9, "7": 20, "8": 25, "9": 17, "10": 30, "11": 37, "12": 24, "13": 31, "14": 32, "15": 24, "16": 48, "17": 56, "18": 46, "19": 30, "20": 35, "21": 53, "22": 15, "23": 43, "24": 38, "25": 13, "26": 19, "27": 17, "28": 28, "29": 38, "30": 35, "31": 28, "32": 46, "33": 18, "34": 22, "35": 42, "36": 23, "37": 19}, "Young H": {"1": 36, "2": 33, "3": 21, "4": 23, "5": 24, "6": 24, "7": 20, "8": 27, "9": 16, "10": 17, "11": 18, "12": 16, "13": 16, "14": 12, "15": 6, "16": 8, "17": 20, "18": 10, "19": 5, "20": 5, "21": 13, "22": 7, "23": 12, "24": 14, "25": 21, "26": 8, "27": 18, "28": 20, "29": 15, "30": 12, "31": 31, "32": 11, "33": 28, "34": 4, "35": 22, "36": 21, "37": 18}, "John": {"1": 25, "2": 27, "3": 20, "4": 32, "5": 23, "6": 32, "7": 45, "8": 27, "9": 36, "10": 21, "11": 14, "12": 35, "13": 40, "14": 30, "15": 27, "16": 10, "17": 16, "18": 26, "19": 7, "20": 15, "21": 40, "22": 36, "23": 11, "24": 33, "25": 37, "26": 28, "27": 24, "28": 9, "29": 15, "30": 24, "31": 29, "32": 24, "33": 76, "34": 11, "35": 31, "36": 35, "37": 22}, "Fridge": {"1": 20, "2": 50, "3": 27, "4": 19, "5": 32, "6": 44, "7": 35, "8": 19, "9": 27, "10": 23, "11": 35, "12": 35, "13": 35, "14": 53, "15": 49, "16": 32, "17": 42, "18": 56, "19": 40, "20": 46, "21": 38, "22": 32, "23": 26, "24": 38, "25": 35, "26": 32, "27": 29, "28": 26, "29": 19, "30": 36, "31": 13, "32": 23, "33": 34, "34": 29, "35": 34, "36": 22, "37": 20}, "Shotgun": {"1": 38, "2": 59, "3": 45, "4": 22, "5": 47, "6": 41, "7": 21, "8": 28, "9": 38, "10": 21, "11": 52, "12": 27, "13": 32, "14": 34, "15": 20, "16": 23, "17": 35, "18": 29, "19": 45, "20": 29, "21": 22, "22": 48, "23": 29, "24": 66, "25": 41, "26": 35, "27": 19, "28": 26, "29": 23, "30": 34, "31": 25, "32": 15, "33": 25, "34": 33, "35": 12, "36": 33, "37": 29}, "Monkey": {"1": 21, "2": 34, "3": 38, "4": 42, "5": 39, "6": 14, "7": 33, "8": 23, "9": 24, "10": 20, "11": 35, "12": 20, "13": 31, "14": 29, "15": 16, "16": 27, "17": 12, "18": 31, "19": 27, "20": 26, "21": 18, "22": 42, "23": 43, "24": 48, "25": 33, "26": 24, "27": 44, "28": 37, "29": 27, "30": 21, "31": 32, "32": 55, "33": 36, "34": 24, "35": 32, "36": 47, "37": 33}, "AVO": {"1": 46, "2": 49, "3": 33, "4": 29, "5": 43, "6": 38, "7": 45, "8": 37, "9": 45, "10": 48, "11": 14, "12": 39, "13": 30, "14": 37, "15": 38, "16": 51, "17": 45, "18": 32, "19": 50, "20": 28, "21": 47, "22": 35, "23": 30, "24": 42, "25": 54, "26": 37, "27": 46, "28": 29, "29": 34, "30": 39, "31": 24, "32": 66, "33": 43, "34": 20, "35": 28, "36": 28, "37": 17}, "Pony": {"1": 25, "2": 12, "3": 6, "4": 13, "5": 13, "6": 21, "7": 19, "8": 26, "9": 11, "10": 18, "11": 25, "12": 23, "13": 27, "14": 19, "15": 14, "16": 15, "17": 16, "18": 32, "19": 21, "20": 12, "21": 11, "22": 18, "23": 22, "24": 15, "25": 16, "26": 12, "27": 9, "28": 12, "29": 6, "30": 16, "31": 20, "32": 35, "33": 31, "34": 17, "35": 17, "36": 5, "37": 1}, "Louise": {"1": 26, "2": 22, "3": 24, "4": 35, "5": 15, "6": 9, "7": 32, "8": 32, "9": 28, "10": 22, "11": 55, "12": 30, "13": 60, "14": 48, "15": 24, "16": 28, "17": 24, "18": 22, "19": 15, "20": 33, "21": 37, "22": 35, "23": 34, "24": 19, "25": 27, "26": 35, "27": 54, "28": 35, "29": 35, "30": 22, "31": 30, "32": 39, "33": 32, "34": 40, "35": 13, "36": 11, "37": 23}, "Ed": {"1": 40, "2": 35, "3": 14, "4": 30, "5": 31, "6": 40, "7": 32, "8": 38, "9": 46, "10": 49, "11": 17, "12": 31, "13": 15, "14": 30, "15": 32, "16": 53, "17": 29, "18": 27, "19": 19, "20": 28, "21": 37, "22": 46, "23": 24, "24": 20, "25": 28, "26": 40, "27": 50, "28": 33, "29": 24, "30": 27, "31": 36, "32": 16, "33": 46, "34": 15, "35": 37, "36": 49, "37": 5}, "Scum": {"1": 49, "2": 53, "3": 38, "4": 24, "5": 50, "6": 33, "7": 35, "8": 28, "9": 31, "10": 35, "11": 35, "12": 26, "13": 44, "14": 22, "15": 28, "16": 32, "17": 32, "18": 17, "19": 32, "20": 13, "21": 38, "22": 47, "23": 24, "24": 34, "25": 38, "26": 45, "27": 26, "28": 28, "29": 23, "30": 30, "31": 37, "32": 42, "33": 41, "34": 35, "35": 17, "36": 32, "37": 7}};
            
            // Position by gameweek data
            const positionByGameweek = {"1": {"Scum": 1, "AVO": 2, "Shergs": 3, "Dil": 4, "Ed": 5, "Rich": 6, "Shotgun": 7, "Young H": 8, "Dave": 9, "Moses": 10, "Michelle": 11, "Louise": 12, "John": 13, "Pony": 14, "Monkey": 15, "Fridge": 16}, "2": {"Shergs": 1, "Scum": 2, "Shotgun": 3, "AVO": 4, "Rich": 5, "Dil": 6, "Ed": 7, "Fridge": 8, "Young H": 9, "Dave": 10, "Monkey": 11, "Moses": 12, "John": 13, "Louise": 14, "Michelle": 15, "Pony": 16}, "3": {"Shotgun": 1, "Scum": 2, "Shergs": 3, "AVO": 4, "Dil": 5, "Rich": 6, "Fridge": 7, "Dave": 8, "Monkey": 9, "Young H": 10, "Ed": 11, "Moses": 12, "John": 13, "Louise": 14, "Michelle": 15, "Pony": 16}, "4": {"Shergs": 1, "Shotgun": 2, "Scum": 3, "AVO": 4, "Dave": 5, "Dil": 6, "Monkey": 7, "Rich": 8, "Ed": 9, "Fridge": 10, "Moses": 11, "Young H": 12, "Michelle": 13, "Louise": 14, "John": 15, "Pony": 16}, "5": {"Scum": 1, "Shotgun": 2, "Shergs": 3, "AVO": 4, "Dil": 5, "Dave": 6, "Monkey": 7, "Rich": 8, "Ed": 9, "Fridge": 10, "Moses": 11, "Young H": 12, "Michelle": 13, "John": 14, "Louise": 15, "Pony": 16}, "6": {"Shotgun": 1, "Shergs": 2, "Scum": 3, "AVO": 4, "Dil": 5, "Dave": 6, "Fridge": 7, "Ed": 8, "Monkey": 9, "Moses": 10, "Rich": 11, "Young H": 12, "John": 13, "Michelle": 14, "Louise": 15, "Pony": 16}, "7": {"Shergs": 1, "AVO": 2, "Scum": 3, "Shotgun": 4, "Dil": 5, "Fridge": 6, "Dave": 7, "Ed": 8, "Monkey": 9, "John": 10, "Rich": 11, "Moses": 12, "Young H": 13, "Michelle": 14, "Louise": 15, "Pony": 16}, "8": {"AVO": 1, "Scum": 2, "Shergs": 3, "Shotgun": 4, "Ed": 5, "Dil": 6, "Fridge": 7, "Monkey": 8, "Dave": 9, "John": 10, "Moses": 11, "Rich": 12, "Young H": 13, "Louise": 14, "Michelle": 15, "Pony": 16}, "9": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Shergs": 4, "Ed": 5, "Dil": 6, "Fridge": 7, "Monkey": 8, "John": 9, "Dave": 10, "Rich": 11, "Moses": 12, "Young H": 13, "Louise": 14, "Michelle": 15, "Pony": 16}, "10": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Ed": 4, "Shergs": 5, "Dil": 6, "Fridge": 7, "John": 8, "Monkey": 9, "Dave": 10, "Rich": 11, "Moses": 12, "Louise": 13, "Young H": 14, "Michelle": 15, "Pony": 16}, "11": {"AVO": 1, "Shotgun": 2, "Scum": 3, "Ed": 4, "Shergs": 5, "Dil": 6, "Fridge": 7, "Dave": 8, "Monkey": 9, "John": 10, "Louise": 11, "Rich": 12, "Moses": 13, "Michelle": 14, "Young H": 15, "Pony": 16}, "12": {"AVO": 1, "Shotgun": 2, "Scum": 3, "Ed": 4, "Shergs": 5, "Dil": 6, "Fridge": 7, "Dave": 8, "Monkey": 9, "John": 10, "Louise": 11, "Moses": 12, "Rich": 13, "Michelle": 14, "Young H": 15, "Pony": 16}, "13": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Shergs": 4, "Dil": 5, "Ed": 6, "Fridge": 7, "Louise": 8, "Dave": 9, "John": 10, "Monkey": 11, "Michelle": 12, "Moses": 13, "Rich": 14, "Young H": 15, "Pony": 16}, "14": {"AVO": 1, "Shotgun": 2, "Scum": 3, "Shergs": 4, "Fridge": 5, "Dil": 6, "Ed": 7, "Louise": 8, "Dave": 9, "John": 10, "Monkey": 11, "Rich": 12, "Michelle": 13, "Moses": 14, "Young H": 15, "Pony": 16}, "15": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Fridge": 4, "Dil": 5, "Shergs": 6, "Ed": 7, "Louise": 8, "Dave": 9, "John": 10, "Monkey": 11, "Rich": 12, "Michelle": 13, "Moses": 14, "Young H": 15, "Pony": 16}, "16": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Fridge": 4, "Ed": 5, "Dil": 6, "Shergs": 7, "Louise": 8, "Dave": 9, "Monkey": 10, "John": 11, "Michelle": 12, "Rich": 13, "Moses": 14, "Young H": 15, "Pony": 16}, "17": {"AVO": 1, "Scum": 2, "Shotgun": 3, "Fridge": 4, "Ed": 5, "Shergs": 6, "Dil": 7, "Louise": 8, "Dave": 9, "Michelle": 10, "John": 11, "Monkey": 12, "Rich": 13, "Moses": 14, "Young H": 15, "Pony": 16}, "18": {"AVO": 1, "Fridge": 2, "Shotgun": 3, "Scum": 4, "Ed": 5, "Dil": 6, "Shergs": 7, "Louise": 8, "Michelle": 9, "Dave": 10, "Monkey": 11, "Rich": 12, "John": 13, "Moses": 14, "Young H": 15, "Pony": 16}, "19": {"AVO": 1, "Fridge": 2, "Shotgun": 3, "Scum": 4, "Dil": 5, "Shergs": 6, "Ed": 7, "Michelle": 8, "Dave": 9, "Louise": 10, "Rich": 11, "Monkey": 12, "John": 13, "Moses": 14, "Pony": 15, "Young H": 16}, "20": {"AVO": 1, "Fridge": 2, "Shotgun": 3, "Dil": 4, "Scum": 5, "Shergs": 6, "Ed": 7, "Michelle": 8, "Louise": 9, "Dave": 10, "Rich": 11, "Monkey": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "21": {"AVO": 1, "Fridge": 2, "Dil": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Louise": 9, "Rich": 10, "Dave": 11, "Monkey": 12, "John": 13, "Moses": 14, "Pony": 15, "Young H": 16}, "22": {"AVO": 1, "Fridge": 2, "Shotgun": 3, "Dil": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Louise": 9, "Rich": 10, "Dave": 11, "Monkey": 12, "John": 13, "Moses": 14, "Pony": 15, "Young H": 16}, "23": {"AVO": 1, "Fridge": 2, "Dil": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Louise": 9, "Dave": 10, "Rich": 11, "Monkey": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "24": {"AVO": 1, "Fridge": 2, "Shotgun": 3, "Dil": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Dave": 9, "Louise": 10, "Rich": 11, "Monkey": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "25": {"AVO": 1, "Shotgun": 2, "Fridge": 3, "Dil": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Rich": 9, "Louise": 10, "Dave": 11, "Monkey": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "26": {"AVO": 1, "Dil": 2, "Shotgun": 3, "Fridge": 4, "Scum": 5, "Ed": 6, "Shergs": 7, "Michelle": 8, "Rich": 9, "Louise": 10, "Dave": 11, "Monkey": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "27": {"AVO": 1, "Dil": 2, "Fridge": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Louise": 7, "Rich": 8, "Shergs": 9, "Michelle": 10, "Monkey": 11, "Dave": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "28": {"AVO": 1, "Dil": 2, "Fridge": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Louise": 7, "Rich": 8, "Monkey": 9, "Shergs": 10, "Michelle": 11, "Dave": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "29": {"AVO": 1, "Dil": 2, "Shotgun": 3, "Fridge": 4, "Scum": 5, "Ed": 6, "Louise": 7, "Rich": 8, "Michelle": 9, "Monkey": 10, "Dave": 11, "Shergs": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "30": {"AVO": 1, "Dil": 2, "Fridge": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Rich": 7, "Louise": 8, "Michelle": 9, "Monkey": 10, "Dave": 11, "Shergs": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "31": {"AVO": 1, "Dil": 2, "Shotgun": 3, "Fridge": 4, "Scum": 5, "Ed": 6, "Louise": 7, "Rich": 8, "Michelle": 9, "Monkey": 10, "Dave": 11, "Shergs": 12, "Moses": 13, "John": 14, "Young H": 15, "Pony": 16}, "32": {"AVO": 1, "Dil": 2, "Shotgun": 3, "Scum": 4, "Fridge": 5, "Ed": 6, "Louise": 7, "Michelle": 8, "Monkey": 9, "Rich": 10, "Dave": 11, "Shergs": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "33": {"AVO": 1, "Dil": 2, "Scum": 3, "Fridge": 4, "Shotgun": 5, "Ed": 6, "Louise": 7, "Monkey": 8, "Rich": 9, "Michelle": 10, "Dave": 11, "Shergs": 12, "John": 13, "Moses": 14, "Pony": 15, "Young H": 16}, "34": {"AVO": 1, "Dil": 2, "Scum": 3, "Fridge": 4, "Shotgun": 5, "Ed": 6, "Louise": 7, "Monkey": 8, "Rich": 9, "Michelle": 10, "Dave": 11, "Shergs": 12, "Moses": 13, "John": 14, "Pony": 15, "Young H": 16}, "35": {"AVO": 1, "Dil": 2, "Fridge": 3, "Scum": 4, "Shotgun": 5, "Ed": 6, "Louise": 7, "Monkey": 8, "Michelle": 9, "Rich": 10, "Dave": 11, "Shergs": 12, "John": 13, "Moses": 14, "Pony": 15, "Young H": 16}, "36": {"AVO": 1, "Dil": 2, "Scum": 3, "Fridge": 4, "Shotgun": 5, "Ed": 6, "Monkey": 7, "Rich": 8, "Louise": 9, "Michelle": 10, "Dave": 11, "Moses": 12, "John": 13, "Shergs": 14, "Pony": 15, "Young H": 16}, "37": {"AVO": 1, "Dil": 2, "Fridge": 3, "Shotgun": 4, "Scum": 5, "Ed": 6, "Monkey": 7, "Louise": 8, "Rich": 9, "Michelle": 10, "Dave": 11, "Moses": 12, "John": 13, "Shergs": 14, "Young H": 15, "Pony": 16}};
            
            // Get all gameweeks
            const gameweeks = Object.keys(positionByGameweek).map(Number).sort((a, b) => a - b);
            
            // Default line styles
            const defaultLineWidth = 2;
            const highlightedLineWidth = 4;
            const defaultPointRadius = 3;
            const highlightedPointRadius = 5;
            
            // Variable to track currently highlighted manager
            let highlightedManager = null;
            
            // Create datasets for points chart
            const pointsDatasets = managers.map(manager => {
                const data = gameweeks.map(gw => pointsByGameweek[manager]?.[gw] || 0);
                return {
                    label: manager,
                    data: data,
                    borderColor: managerColors[manager],
                    backgroundColor: managerColors[manager] + '33',
                    fill: false,
                    tension: 0.1,
                    pointRadius: defaultPointRadius,
                    pointHoverRadius: 7,
                    borderWidth: defaultLineWidth
                };
            });
            
            // Create datasets for position chart (inverted for better visualization)
            const positionDatasets = managers.map(manager => {
                const data = gameweeks.map(gw => {
                    // If position data exists, use it; otherwise, use a high number as default
                    return positionByGameweek[gw]?.[manager] || managers.length + 1;
                });
                return {
                    label: manager,
                    data: data,
                    borderColor: managerColors[manager],
                    backgroundColor: managerColors[manager] + '33',
                    fill: false,
                    tension: 0.1,
                    pointRadius: defaultPointRadius,
                    pointHoverRadius: 7,
                    borderWidth: defaultLineWidth
                };
            });
            
            // Create points chart
            const pointsChart = new Chart(pointsCtx, {
                type: 'line',
                data: {
                    labels: gameweeks.map(gw => `GW ${gw}`),
                    datasets: pointsDatasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            top: 40,
                            bottom: 40,
                            left: 30,
                            right: 30
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'Points'
                            },
                            beginAtZero: true,
                            ticks: {
                                padding: 15
                            },
                            grace: '10%'  // Add 10% padding to the top of the scale
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Gameweek'
                            }
                        }
                    }
                }
            });
            
            // Create position chart (note: y-axis is inverted)
            const positionChart = new Chart(positionCtx, {
                type: 'line',
                data: {
                    labels: gameweeks.map(gw => `GW ${gw}`),
                    datasets: positionDatasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            top: 40,
                            bottom: 40,
                            left: 30,
                            right: 30
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                title: function(context) {
                                    return 'Gameweek ' + context[0].label.replace('GW ', '');
                                },
                                label: function(context) {
                                    const manager = context.dataset.label;
                                    const position = context.raw;
                                    return `${manager}: Position ${position}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'League Position'
                            },
                            reverse: true,
                            min: 1,  // Start at position 1
                            max: managers.length,  // End at last position
                            ticks: {
                                stepSize: 1,
                                padding: 15,
                                precision: 0,
                                callback: function(value) {
                                    // Only show integer values
                                    if (Number.isInteger(value) && value >= 1 && value <= managers.length) {
                                        return value;
                                    }
                                    return '';
                                }
                            },
                            grid: {
                                offset: false
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Gameweek'
                            }
                        }
                    }
                }
            });
            
            // Create custom legend
            const legendContainer = document.getElementById('chart-legend');
            managers.forEach(manager => {
                const color = managerColors[manager];
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.setAttribute('data-manager', manager);
                
                const colorBox = document.createElement('div');
                colorBox.className = 'legend-color';
                colorBox.style.backgroundColor = color;
                
                const label = document.createElement('span');
                label.textContent = manager;
                
                legendItem.appendChild(colorBox);
                legendItem.appendChild(label);
                legendContainer.appendChild(legendItem);
                
                // Add click event to toggle dataset visibility
                legendItem.addEventListener('click', () => {
                    const index = managers.indexOf(manager);
                    const isHidden = pointsChart.isDatasetHidden(index);
                    
                    // Toggle visibility state
                    pointsChart.setDatasetVisibility(index, isHidden);
                    positionChart.setDatasetVisibility(index, isHidden);
                    
                    // Update legend item styling
                    if (isHidden) {
                        legendItem.style.opacity = '1';
                    } else {
                        legendItem.style.opacity = '0.5';
                    }
                    
                    // Update charts
                    pointsChart.update();
                    positionChart.update();
                });
            });
            
            // Function to highlight a specific manager
            function highlightManager(managerName) {
                // Reset all datasets to default style
                resetHighlighting();
                
                if (!managerName) return;
                
                // Highlight the selected manager in the legend
                const legendItems = document.querySelectorAll('.legend-item');
                legendItems.forEach(item => {
                    if (item.getAttribute('data-manager') === managerName) {
                        item.classList.add('highlighted');
                    }
                });
                
                // Get the index of the manager to highlight
                const managerIndex = managers.indexOf(managerName);
                if (managerIndex === -1) return;
                
                // Update line width and point radius for the highlighted manager
                pointsChart.data.datasets[managerIndex].borderWidth = highlightedLineWidth;
                pointsChart.data.datasets[managerIndex].pointRadius = highlightedPointRadius;
                positionChart.data.datasets[managerIndex].borderWidth = highlightedLineWidth;
                positionChart.data.datasets[managerIndex].pointRadius = highlightedPointRadius;
                
                // Fade other datasets
                for (let i = 0; i < managers.length; i++) {
                    if (i !== managerIndex) {
                        // Reduce opacity of other datasets
                        pointsChart.data.datasets[i].borderColor = managerColors[managers[i]] + '66'; // 40% opacity
                        positionChart.data.datasets[i].borderColor = managerColors[managers[i]] + '66';
                    }
                }
                
                // Update charts
                pointsChart.update();
                positionChart.update();
                
                // Store the highlighted manager
                highlightedManager = managerName;
                
                // Enable reset button
                document.getElementById('reset-highlight').disabled = false;
            }
            
            // Function to reset highlighting
            function resetHighlighting() {
                // Reset all datasets to default style
                for (let i = 0; i < managers.length; i++) {
                    pointsChart.data.datasets[i].borderWidth = defaultLineWidth;
                    pointsChart.data.datasets[i].pointRadius = defaultPointRadius;
                    pointsChart.data.datasets[i].borderColor = managerColors[managers[i]];
                    positionChart.data.datasets[i].borderWidth = defaultLineWidth;
                    positionChart.data.datasets[i].pointRadius = defaultPointRadius;
                    positionChart.data.datasets[i].borderColor = managerColors[managers[i]];
                }
                
                // Reset legend highlighting
                const legendItems = document.querySelectorAll('.legend-item');
                legendItems.forEach(item => {
                    item.classList.remove('highlighted');
                });
                
                // Update charts
                pointsChart.update();
                positionChart.update();
                
                // Reset dropdown
                document.getElementById('manager-dropdown').value = '';
                
                // Clear stored highlighted manager
                highlightedManager = null;
                
                // Disable reset button
                document.getElementById('reset-highlight').disabled = true;
            }
            
            // Add event listener for manager dropdown
            document.getElementById('manager-dropdown').addEventListener('change', function() {
                const selectedManager = this.value;
                highlightManager(selectedManager);
            });
            
            // Add event listener for reset button
            document.getElementById('reset-highlight').addEventListener('click', function() {
                resetHighlighting();
            });
            
            // Switch between views
            document.getElementById('points-view').addEventListener('click', function() {
                this.classList.add('active');
                document.getElementById('position-view').classList.remove('active');
                document.getElementById('points-chart-container').style.display = 'block';
                document.getElementById('position-chart-container').style.display = 'none';
            });
            
            document.getElementById('position-view').addEventListener('click', function() {
                this.classList.add('active');
                document.getElementById('points-view').classList.remove('active');
                document.getElementById('points-chart-container').style.display = 'none';
                document.getElementById('position-chart-container').style.display = 'block';
            });
        </script>
    </body>
    </html>
    